{"ast":null,"code":"import { truthy } from 'vega-util';\nvar SKIP = {\n  skip: true\n};\nexport function getState(options) {\n  var ctx = this,\n      state = {};\n\n  if (options.signals) {\n    var signals = state.signals = {};\n    Object.keys(ctx.signals).forEach(function (key) {\n      var op = ctx.signals[key];\n\n      if (options.signals(key, op)) {\n        signals[key] = op.value;\n      }\n    });\n  }\n\n  if (options.data) {\n    var data = state.data = {};\n    Object.keys(ctx.data).forEach(function (key) {\n      var dataset = ctx.data[key];\n\n      if (options.data(key, dataset)) {\n        data[key] = dataset.input.value;\n      }\n    });\n  }\n\n  if (ctx.subcontext && options.recurse !== false) {\n    state.subcontext = ctx.subcontext.map(function (ctx) {\n      return ctx.getState(options);\n    });\n  }\n\n  return state;\n}\nexport function setState(state) {\n  var ctx = this,\n      df = ctx.dataflow,\n      data = state.data,\n      signals = state.signals;\n  Object.keys(signals || {}).forEach(function (key) {\n    df.update(ctx.signals[key], signals[key], SKIP);\n  });\n  Object.keys(data || {}).forEach(function (key) {\n    df.pulse(ctx.data[key].input, df.changeset().remove(truthy).insert(data[key]));\n  });\n  (state.subcontext || []).forEach(function (substate, i) {\n    var subctx = ctx.subcontext[i];\n    if (subctx) subctx.setState(substate);\n  });\n}","map":{"version":3,"sources":["C:/NewReactResume/resm/node_modules/vega-runtime/src/state.js"],"names":["truthy","SKIP","skip","getState","options","ctx","state","signals","Object","keys","forEach","key","op","value","data","dataset","input","subcontext","recurse","map","setState","df","dataflow","update","pulse","changeset","remove","insert","substate","i","subctx"],"mappings":"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","sourcesContent":["import {truthy} from 'vega-util';\n\nvar SKIP = {skip: true};\n\nexport function getState(options) {\n  var ctx = this,\n      state = {};\n\n  if (options.signals) {\n    var signals = (state.signals = {});\n    Object.keys(ctx.signals).forEach(function(key) {\n      var op = ctx.signals[key];\n      if (options.signals(key, op)) {\n        signals[key] = op.value;\n      }\n    });\n  }\n\n  if (options.data) {\n    var data = (state.data = {});\n    Object.keys(ctx.data).forEach(function(key) {\n      var dataset = ctx.data[key];\n      if (options.data(key, dataset)) {\n        data[key] = dataset.input.value;\n      }\n    });\n  }\n\n  if (ctx.subcontext && options.recurse !== false) {\n    state.subcontext = ctx.subcontext.map(function(ctx) {\n      return ctx.getState(options);\n    });\n  }\n\n  return state;\n}\n\nexport function setState(state) {\n  var ctx = this,\n      df = ctx.dataflow,\n      data = state.data,\n      signals = state.signals;\n\n  Object.keys(signals || {}).forEach(function(key) {\n    df.update(ctx.signals[key], signals[key], SKIP);\n  });\n\n  Object.keys(data || {}).forEach(function(key) {\n    df.pulse(\n      ctx.data[key].input,\n      df.changeset().remove(truthy).insert(data[key])\n    );\n  });\n\n  (state.subcontext  || []).forEach(function(substate, i) {\n    var subctx = ctx.subcontext[i];\n    if (subctx) subctx.setState(substate);\n  });\n}\n"]},"metadata":{},"sourceType":"module"}