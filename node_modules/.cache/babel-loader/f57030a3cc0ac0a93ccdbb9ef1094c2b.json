{"ast":null,"code":"import UniqueList from './util/UniqueList';\nimport { debounce, id, identity, truthy } from 'vega-util';\nvar STREAM_ID = 0;\n/**\n * Models an event stream.\n * @constructor\n * @param {function(Object, number): boolean} [filter] - Filter predicate.\n *   Events pass through when truthy, events are suppressed when falsy.\n * @param {function(Object): *} [apply] - Applied to input events to produce\n *   new event values.\n * @param {function(Object)} [receive] - Event callback function to invoke\n *   upon receipt of a new event. Use to override standard event processing.\n */\n\nexport default function EventStream(filter, apply, receive) {\n  this.id = ++STREAM_ID;\n  this.value = null;\n  if (receive) this.receive = receive;\n  if (filter) this._filter = filter;\n  if (apply) this._apply = apply;\n}\n/**\n * Creates a new event stream instance with the provided\n * (optional) filter, apply and receive functions.\n * @param {function(Object, number): boolean} [filter] - Filter predicate.\n *   Events pass through when truthy, events are suppressed when falsy.\n * @param {function(Object): *} [apply] - Applied to input events to produce\n *   new event values.\n * @see EventStream\n */\n\nexport function stream(filter, apply, receive) {\n  return new EventStream(filter, apply, receive);\n}\nvar prototype = EventStream.prototype;\nprototype._filter = truthy;\nprototype._apply = identity;\n\nprototype.targets = function () {\n  return this._targets || (this._targets = UniqueList(id));\n};\n\nprototype.consume = function (_) {\n  if (!arguments.length) return !!this._consume;\n  this._consume = !!_;\n  return this;\n};\n\nprototype.receive = function (evt) {\n  if (this._filter(evt)) {\n    var val = this.value = this._apply(evt),\n        trg = this._targets,\n        n = trg ? trg.length : 0,\n        i = 0;\n\n    for (; i < n; ++i) trg[i].receive(val);\n\n    if (this._consume) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  }\n};\n\nprototype.filter = function (filter) {\n  var s = stream(filter);\n  this.targets().add(s);\n  return s;\n};\n\nprototype.apply = function (apply) {\n  var s = stream(null, apply);\n  this.targets().add(s);\n  return s;\n};\n\nprototype.merge = function () {\n  var s = stream();\n  this.targets().add(s);\n\n  for (var i = 0, n = arguments.length; i < n; ++i) {\n    arguments[i].targets().add(s);\n  }\n\n  return s;\n};\n\nprototype.throttle = function (pause) {\n  var t = -1;\n  return this.filter(function () {\n    var now = Date.now();\n\n    if (now - t > pause) {\n      t = now;\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n};\n\nprototype.debounce = function (delay) {\n  var s = stream();\n  this.targets().add(stream(null, null, debounce(delay, function (e) {\n    var df = e.dataflow;\n    s.receive(e);\n    if (df && df.run) df.run();\n  })));\n  return s;\n};\n\nprototype.between = function (a, b) {\n  var active = false;\n  a.targets().add(stream(null, null, function () {\n    active = true;\n  }));\n  b.targets().add(stream(null, null, function () {\n    active = false;\n  }));\n  return this.filter(function () {\n    return active;\n  });\n};","map":{"version":3,"sources":["C:/NewReactResume/resm/node_modules/vega-dataflow/src/EventStream.js"],"names":["UniqueList","debounce","id","identity","truthy","STREAM_ID","EventStream","filter","apply","receive","value","_filter","_apply","stream","prototype","targets","_targets","consume","_","arguments","length","_consume","evt","val","trg","n","i","preventDefault","stopPropagation","s","add","merge","throttle","pause","t","now","Date","delay","e","df","dataflow","run","between","a","b","active"],"mappings":"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","sourcesContent":["import UniqueList from './util/UniqueList';\nimport {debounce, id, identity, truthy} from 'vega-util';\n\nvar STREAM_ID = 0;\n\n/**\n * Models an event stream.\n * @constructor\n * @param {function(Object, number): boolean} [filter] - Filter predicate.\n *   Events pass through when truthy, events are suppressed when falsy.\n * @param {function(Object): *} [apply] - Applied to input events to produce\n *   new event values.\n * @param {function(Object)} [receive] - Event callback function to invoke\n *   upon receipt of a new event. Use to override standard event processing.\n */\nexport default function EventStream(filter, apply, receive) {\n  this.id = ++STREAM_ID;\n  this.value = null;\n  if (receive) this.receive = receive;\n  if (filter) this._filter = filter;\n  if (apply) this._apply = apply;\n}\n\n/**\n * Creates a new event stream instance with the provided\n * (optional) filter, apply and receive functions.\n * @param {function(Object, number): boolean} [filter] - Filter predicate.\n *   Events pass through when truthy, events are suppressed when falsy.\n * @param {function(Object): *} [apply] - Applied to input events to produce\n *   new event values.\n * @see EventStream\n */\nexport function stream(filter, apply, receive) {\n  return new EventStream(filter, apply, receive);\n}\n\nvar prototype = EventStream.prototype;\n\nprototype._filter = truthy;\n\nprototype._apply = identity;\n\nprototype.targets = function() {\n  return this._targets || (this._targets = UniqueList(id));\n};\n\nprototype.consume = function(_) {\n  if (!arguments.length) return !!this._consume;\n  this._consume = !!_;\n  return this;\n};\n\nprototype.receive = function(evt) {\n  if (this._filter(evt)) {\n    var val = (this.value = this._apply(evt)),\n        trg = this._targets,\n        n = trg ? trg.length : 0,\n        i = 0;\n\n    for (; i<n; ++i) trg[i].receive(val);\n\n    if (this._consume) {\n      evt.preventDefault();\n      evt.stopPropagation();\n    }\n  }\n};\n\nprototype.filter = function(filter) {\n  var s = stream(filter);\n  this.targets().add(s);\n  return s;\n};\n\nprototype.apply = function(apply) {\n  var s = stream(null, apply);\n  this.targets().add(s);\n  return s;\n};\n\nprototype.merge = function() {\n  var s = stream();\n\n  this.targets().add(s);\n  for (var i=0, n=arguments.length; i<n; ++i) {\n    arguments[i].targets().add(s);\n  }\n\n  return s;\n};\n\nprototype.throttle = function(pause) {\n  var t = -1;\n  return this.filter(function() {\n    var now = Date.now();\n    if ((now - t) > pause) {\n      t = now;\n      return 1;\n    } else {\n      return 0;\n    }\n  });\n};\n\nprototype.debounce = function(delay) {\n  var s = stream();\n\n  this.targets().add(stream(null, null,\n    debounce(delay, function(e) {\n      var df = e.dataflow;\n      s.receive(e);\n      if (df && df.run) df.run();\n    })\n  ));\n\n  return s;\n};\n\nprototype.between = function(a, b) {\n  var active = false;\n  a.targets().add(stream(null, null, function() { active = true; }));\n  b.targets().add(stream(null, null, function() { active = false; }));\n  return this.filter(function() { return active; });\n};\n"]},"metadata":{},"sourceType":"module"}