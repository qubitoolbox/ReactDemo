{"ast":null,"code":"import { createDefaultStyle, DEFAULT_OPTIONS } from './defaults';\nimport { formatValue } from './formatValue';\nimport { calculatePosition } from './position';\n/**\n * The tooltip handler class.\n */\n\nexport class Handler {\n  /**\n   * Create the tooltip handler and initialize the element and style.\n   *\n   * @param options Tooltip Options\n   */\n  constructor(options) {\n    this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n    const elementId = this.options.id; // bind this to call\n\n    this.call = this.tooltipHandler.bind(this); // prepend a default stylesheet for tooltips to the head\n\n    if (!this.options.disableDefaultStyle && !document.getElementById(this.options.styleId)) {\n      const style = document.createElement('style');\n      style.setAttribute('id', this.options.styleId);\n      style.innerHTML = createDefaultStyle(elementId);\n      const head = document.head;\n\n      if (head.childNodes.length > 0) {\n        head.insertBefore(style, head.childNodes[0]);\n      } else {\n        head.appendChild(style);\n      }\n    } // append a div element that we use as a tooltip unless it already exists\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n\n    this.el = document.getElementById(elementId);\n\n    if (!this.el) {\n      this.el = document.createElement('div');\n      this.el.setAttribute('id', elementId);\n      this.el.classList.add('vg-tooltip');\n      document.body.appendChild(this.el);\n    }\n  }\n  /**\n   * The tooltip handler function.\n   */\n\n\n  tooltipHandler(handler, event, item, value) {\n    // console.log(handler, event, item, value);\n    // hide tooltip for null, undefined, or empty string values\n    if (value == null || value === '') {\n      this.el.classList.remove('visible', `${this.options.theme}-theme`);\n      return;\n    } // set the tooltip content\n\n\n    this.el.innerHTML = formatValue(value, this.options.sanitize, this.options.maxDepth); // make the tooltip visible\n\n    this.el.classList.add('visible', `${this.options.theme}-theme`);\n    const {\n      x,\n      y\n    } = calculatePosition(event, this.el.getBoundingClientRect(), this.options.offsetX, this.options.offsetY);\n    this.el.setAttribute('style', `top: ${y}px; left: ${x}px`);\n  }\n\n}","map":{"version":3,"sources":["../../src/Handler.ts"],"names":[],"mappings":"AAEA,SAAQ,kBAAR,EAA4B,eAA5B,QAA2D,YAA3D;AACA,SAAQ,WAAR,QAA0B,eAA1B;AACA,SAAQ,iBAAR,QAAgC,YAAhC;AAEA;;;;AAGA,OAAM,MAAO,OAAP,CAAc;AAgBlB;;;;;AAKA,EAAA,WAAA,CAAY,OAAZ,EAAsC;AACpC,SAAK,OAAL,GAAY,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAO,eAAP,CAAA,EAA2B,OAA3B,CAAZ;AACA,UAAM,SAAS,GAAG,KAAK,OAAL,CAAa,EAA/B,CAFoC,CAIpC;;AACA,SAAK,IAAL,GAAY,KAAK,cAAL,CAAoB,IAApB,CAAyB,IAAzB,CAAZ,CALoC,CAOpC;;AACA,QAAI,CAAC,KAAK,OAAL,CAAa,mBAAd,IAAqC,CAAC,QAAQ,CAAC,cAAT,CAAwB,KAAK,OAAL,CAAa,OAArC,CAA1C,EAAyF;AACvF,YAAM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,OAAvB,CAAd;AACA,MAAA,KAAK,CAAC,YAAN,CAAmB,IAAnB,EAAyB,KAAK,OAAL,CAAa,OAAtC;AACA,MAAA,KAAK,CAAC,SAAN,GAAkB,kBAAkB,CAAC,SAAD,CAApC;AAEA,YAAM,IAAI,GAAG,QAAQ,CAAC,IAAtB;;AACA,UAAI,IAAI,CAAC,UAAL,CAAgB,MAAhB,GAAyB,CAA7B,EAAgC;AAC9B,QAAA,IAAI,CAAC,YAAL,CAAkB,KAAlB,EAAyB,IAAI,CAAC,UAAL,CAAgB,CAAhB,CAAzB;AACD,OAFD,MAEO;AACL,QAAA,IAAI,CAAC,WAAL,CAAiB,KAAjB;AACD;AACF,KAnBmC,CAqBpC;AACA;;;AACA,SAAK,EAAL,GAAU,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAV;;AACA,QAAI,CAAC,KAAK,EAAV,EAAc;AACZ,WAAK,EAAL,GAAU,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAAV;AACA,WAAK,EAAL,CAAQ,YAAR,CAAqB,IAArB,EAA2B,SAA3B;AACA,WAAK,EAAL,CAAQ,SAAR,CAAkB,GAAlB,CAAsB,YAAtB;AAEA,MAAA,QAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,KAAK,EAA/B;AACD;AACF;AAED;;;;;AAGQ,EAAA,cAAc,CAAC,OAAD,EAAe,KAAf,EAAkC,IAAlC,EAA6C,KAA7C,EAAuD;AAC3E;AAEA;AACA,QAAI,KAAK,IAAI,IAAT,IAAiB,KAAK,KAAK,EAA/B,EAAmC;AACjC,WAAK,EAAL,CAAQ,SAAR,CAAkB,MAAlB,CAAyB,SAAzB,EAAoC,GAAG,KAAK,OAAL,CAAa,KAAK,QAAzD;AACA;AACD,KAP0E,CAS3E;;;AACA,SAAK,EAAL,CAAQ,SAAR,GAAoB,WAAW,CAAC,KAAD,EAAQ,KAAK,OAAL,CAAa,QAArB,EAA+B,KAAK,OAAL,CAAa,QAA5C,CAA/B,CAV2E,CAY3E;;AACA,SAAK,EAAL,CAAQ,SAAR,CAAkB,GAAlB,CAAsB,SAAtB,EAAiC,GAAG,KAAK,OAAL,CAAa,KAAK,QAAtD;AAEA,UAAM;AAAC,MAAA,CAAD;AAAI,MAAA;AAAJ,QAAS,iBAAiB,CAC9B,KAD8B,EAE9B,KAAK,EAAL,CAAQ,qBAAR,EAF8B,EAG9B,KAAK,OAAL,CAAa,OAHiB,EAI9B,KAAK,OAAL,CAAa,OAJiB,CAAhC;AAOA,SAAK,EAAL,CAAQ,YAAR,CAAqB,OAArB,EAA8B,QAAQ,CAAC,aAAa,CAAC,IAArD;AACD;;AAhFiB","sourceRoot":"","sourcesContent":["import { createDefaultStyle, DEFAULT_OPTIONS } from './defaults';\nimport { formatValue } from './formatValue';\nimport { calculatePosition } from './position';\n/**\n * The tooltip handler class.\n */\nexport class Handler {\n    /**\n     * Create the tooltip handler and initialize the element and style.\n     *\n     * @param options Tooltip Options\n     */\n    constructor(options) {\n        this.options = Object.assign(Object.assign({}, DEFAULT_OPTIONS), options);\n        const elementId = this.options.id;\n        // bind this to call\n        this.call = this.tooltipHandler.bind(this);\n        // prepend a default stylesheet for tooltips to the head\n        if (!this.options.disableDefaultStyle && !document.getElementById(this.options.styleId)) {\n            const style = document.createElement('style');\n            style.setAttribute('id', this.options.styleId);\n            style.innerHTML = createDefaultStyle(elementId);\n            const head = document.head;\n            if (head.childNodes.length > 0) {\n                head.insertBefore(style, head.childNodes[0]);\n            }\n            else {\n                head.appendChild(style);\n            }\n        }\n        // append a div element that we use as a tooltip unless it already exists\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this.el = document.getElementById(elementId);\n        if (!this.el) {\n            this.el = document.createElement('div');\n            this.el.setAttribute('id', elementId);\n            this.el.classList.add('vg-tooltip');\n            document.body.appendChild(this.el);\n        }\n    }\n    /**\n     * The tooltip handler function.\n     */\n    tooltipHandler(handler, event, item, value) {\n        // console.log(handler, event, item, value);\n        // hide tooltip for null, undefined, or empty string values\n        if (value == null || value === '') {\n            this.el.classList.remove('visible', `${this.options.theme}-theme`);\n            return;\n        }\n        // set the tooltip content\n        this.el.innerHTML = formatValue(value, this.options.sanitize, this.options.maxDepth);\n        // make the tooltip visible\n        this.el.classList.add('visible', `${this.options.theme}-theme`);\n        const { x, y } = calculatePosition(event, this.el.getBoundingClientRect(), this.options.offsetX, this.options.offsetY);\n        this.el.setAttribute('style', `top: ${y}px; left: ${x}px`);\n    }\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSGFuZGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9IYW5kbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLE9BQU8sRUFBQyxrQkFBa0IsRUFBRSxlQUFlLEVBQVUsTUFBTSxZQUFZLENBQUM7QUFDeEUsT0FBTyxFQUFDLFdBQVcsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMxQyxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxZQUFZLENBQUM7QUFFN0M7O0dBRUc7QUFDSCxNQUFNLE9BQU8sT0FBTztJQWdCbEI7Ozs7T0FJRztJQUNILFlBQVksT0FBMEI7UUFDcEMsSUFBSSxDQUFDLE9BQU8sbUNBQU8sZUFBZSxHQUFLLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELE1BQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDO1FBRWxDLG9CQUFvQjtRQUNwQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRTNDLHdEQUF3RDtRQUN4RCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRTtZQUN2RixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzlDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDL0MsS0FBSyxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVoRCxNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDO1lBQzNCLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO2dCQUM5QixJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7YUFDOUM7aUJBQU07Z0JBQ0wsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQzthQUN6QjtTQUNGO1FBRUQseUVBQXlFO1FBQ3pFLG9FQUFvRTtRQUNwRSxJQUFJLENBQUMsRUFBRSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFFLENBQUM7UUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDWixJQUFJLENBQUMsRUFBRSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsQ0FBQztZQUVwQyxRQUFRLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDcEM7SUFDSCxDQUFDO0lBRUQ7O09BRUc7SUFDSyxjQUFjLENBQUMsT0FBWSxFQUFFLEtBQWlCLEVBQUUsSUFBUyxFQUFFLEtBQVU7UUFDM0UsNENBQTRDO1FBRTVDLDJEQUEyRDtRQUMzRCxJQUFJLEtBQUssSUFBSSxJQUFJLElBQUksS0FBSyxLQUFLLEVBQUUsRUFBRTtZQUNqQyxJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLFFBQVEsQ0FBQyxDQUFDO1lBQ25FLE9BQU87U0FDUjtRQUVELDBCQUEwQjtRQUMxQixJQUFJLENBQUMsRUFBRSxDQUFDLFNBQVMsR0FBRyxXQUFXLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFckYsMkJBQTJCO1FBQzNCLElBQUksQ0FBQyxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssUUFBUSxDQUFDLENBQUM7UUFFaEUsTUFBTSxFQUFDLENBQUMsRUFBRSxDQUFDLEVBQUMsR0FBRyxpQkFBaUIsQ0FDOUIsS0FBSyxFQUNMLElBQUksQ0FBQyxFQUFFLENBQUMscUJBQXFCLEVBQUUsRUFDL0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQ3BCLElBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUNyQixDQUFDO1FBRUYsSUFBSSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDN0QsQ0FBQztDQUNGIn0="]},"metadata":{},"sourceType":"module"}