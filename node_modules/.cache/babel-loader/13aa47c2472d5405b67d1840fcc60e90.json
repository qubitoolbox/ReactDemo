{"ast":null,"code":"var _jsxFileName = \"C:\\\\NewReactResume\\\\resm\\\\src\\\\Components\\\\FirstML\\\\hmm.js\";\nimport React from \"react\";\nimport * as tf from '@tensorflow/tfjs';\nimport * as mobilenet from '@tensorflow-models/mobilenet';\nimport * as jpeg from 'jpeg-js';\nimport studio4 from \"../../assets/img/olu-eletu.jpg\";\nimport { fetch } from '@tensorflow/tfjs-react-native'; //import Constants from 'expo-constants'\n//import * as Permissions from 'expo-permissions'\n//import '@tensorflow/tfjs-react-native';\n\nexport default class TheMl extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.classifyImage = async () => {\n      try {\n        const imageAssetPath = Image.resolveAssetSource(this.state.image); //console.log(\"1\")\n\n        const response = await fetch(imageAssetPath, {}, {\n          isBinary: true\n        }); //console.log(\"2\")\n\n        const rawImageData = await response.arrayBuffer(); //const rawImageData = this.state.image\n\n        console.log(rawImageData);\n        const imageTensor = this.imageToTensor(rawImageData);\n        console.log(\"4\");\n        const predictions = await this.model.classify(imageTensor);\n        this.setState({\n          predictions\n        });\n        console.log(predictions);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    this.state = {\n      isTfReady: false,\n      isModelReady: false,\n      predictions: null,\n      image: null\n    };\n  }\n\n  async componentDidMount() {\n    // Wait for tf to be ready.\n    await tf.ready(); // Signal to the app that tensorflow.js can now be used.\n\n    this.setState({\n      isTfReady: true\n    });\n    this.model = await mobilenet.load();\n    this.setState({\n      isModelReady: true\n    }); //const source = { uri: response.uri }\n\n    this.setState({\n      image: studio4\n    });\n    this.classifyImage();\n  }\n\n  imageToTensor(rawImageData) {\n    const TO_UINT8ARRAY = true;\n    const {\n      width,\n      height,\n      data\n    } = jpeg.decode(rawImageData, TO_UINT8ARRAY); // Drop the alpha channel info for mobilenet\n\n    const buffer = new Uint8Array(width * height * 3);\n    let offset = 0; // offset into original data\n\n    for (let i = 0; i < buffer.length; i += 3) {\n      buffer[i] = data[offset];\n      buffer[i + 1] = data[offset + 1];\n      buffer[i + 2] = data[offset + 2];\n      offset += 4;\n      console.log(offset);\n    }\n\n    return tf.tensor3d(buffer, [height, width, 3]);\n  }\n\n  render() {\n    const {\n      isTfReady,\n      isModelReady,\n      predictions,\n      image\n    } = this.state; //\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.state.isTfReady ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"TF Is Ready\") : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"yes\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Model ready?\", ' ', this.state.isModelReady ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Model has been Loaded\") : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"Loading Model...\"), this.state.image ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Image loaded\") : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, \"Waiting for Image...\"), this.state.predictions ? React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Predictions Loaded\") : React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Loading Predictions...\")));\n  }\n\n}","map":{"version":3,"sources":["C:/NewReactResume/resm/src/Components/FirstML/hmm.js"],"names":["React","tf","mobilenet","jpeg","studio4","fetch","TheMl","Component","constructor","props","classifyImage","imageAssetPath","Image","resolveAssetSource","state","image","response","isBinary","rawImageData","arrayBuffer","console","log","imageTensor","imageToTensor","predictions","model","classify","setState","error","isTfReady","isModelReady","componentDidMount","ready","load","TO_UINT8ARRAY","width","height","data","decode","buffer","Uint8Array","offset","i","length","tensor3d","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport * as mobilenet from '@tensorflow-models/mobilenet';\r\nimport * as jpeg from 'jpeg-js'\r\nimport studio4 from \"../../assets/img/olu-eletu.jpg\";\r\nimport { fetch } from '@tensorflow/tfjs-react-native'\r\n\r\n//import Constants from 'expo-constants'\r\n//import * as Permissions from 'expo-permissions'\r\n//import '@tensorflow/tfjs-react-native';\r\n \r\nexport default class TheMl extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isTfReady: false,\r\n      isModelReady: false,\r\n      predictions: null,\r\n      image: null\r\n    };\r\n  }\r\n \r\n  async componentDidMount() {\r\n    // Wait for tf to be ready.\r\n    await tf.ready();\r\n    // Signal to the app that tensorflow.js can now be used.\r\n    this.setState({\r\n      isTfReady: true,\r\n    })\r\n    this.model = await mobilenet.load()\r\n    this.setState({ isModelReady: true })\r\n\r\n    //const source = { uri: response.uri }\r\n    this.setState({ image: studio4 })\r\n    this.classifyImage();\r\n\r\n  }\r\n\r\n  imageToTensor(rawImageData) {\r\n    const TO_UINT8ARRAY = true\r\n    const { width, height, data } = jpeg.decode(rawImageData, TO_UINT8ARRAY)\r\n    // Drop the alpha channel info for mobilenet\r\n    const buffer = new Uint8Array(width * height * 3)\r\n    let offset = 0 // offset into original data\r\n    for (let i = 0; i < buffer.length; i += 3) {\r\n      buffer[i] = data[offset]\r\n      buffer[i + 1] = data[offset + 1]\r\n      buffer[i + 2] = data[offset + 2]\r\n\r\n      offset += 4\r\n      console.log(offset)\r\n    }\r\n\r\n    return tf.tensor3d(buffer, [height, width, 3])\r\n  }\r\n\r\n  classifyImage = async () => {\r\n    try {\r\n     \r\n      const imageAssetPath = Image.resolveAssetSource(this.state.image)\r\n      //console.log(\"1\")\r\n      const response = await fetch(imageAssetPath, {}, { isBinary: true })\r\n      //console.log(\"2\")\r\n      const rawImageData = await response.arrayBuffer()\r\n      //const rawImageData = this.state.image\r\n      console.log(rawImageData)\r\n      const imageTensor = this.imageToTensor(rawImageData)\r\n      console.log(\"4\")\r\n      const predictions = await this.model.classify(imageTensor)\r\n      this.setState({ predictions })\r\n      console.log(predictions)\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n  }\r\n \r\n \r\n  render() {\r\n\r\n    const { isTfReady, isModelReady, predictions, image } = this.state\r\n    //\r\n    return (\r\n\r\n        <div>\r\n            {this.state.isTfReady?<p>TF Is Ready</p>:<p>yes</p>}\r\n            <p>\r\n                Model ready?{' '}\r\n                {this.state.isModelReady ? <p>Model has been Loaded</p> : <p>Loading Model...</p>}\r\n\r\n                {this.state.image ? <p>Image loaded</p> : <p>Waiting for Image...</p>}\r\n                {this.state.predictions ? <p>Predictions Loaded</p> : <p>Loading Predictions...</p>}\r\n                \r\n            </p>\r\n        </div>\r\n\r\n    );\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}