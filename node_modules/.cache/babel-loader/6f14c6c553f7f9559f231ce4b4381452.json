{"ast":null,"code":"import { Transform } from 'vega-dataflow';\nimport { falsy, inherits, isArray } from 'vega-util';\n/**\n * Invokes encoding functions for visual items.\n * @constructor\n * @param {object} params - The parameters to the encoding functions. This\n *   parameter object will be passed through to all invoked encoding functions.\n * @param {object} [params.mod=false] - Flag indicating if tuples in the input\n *   mod set that are unmodified by encoders should be included in the output.\n * @param {object} param.encoders - The encoding functions\n * @param {function(object, object): boolean} [param.encoders.update] - Update encoding set\n * @param {function(object, object): boolean} [param.encoders.enter] - Enter encoding set\n * @param {function(object, object): boolean} [param.encoders.exit] - Exit encoding set\n */\n\nexport default function Encode(params) {\n  Transform.call(this, null, params);\n}\nvar prototype = inherits(Encode, Transform);\n\nprototype.transform = function (_, pulse) {\n  var out = pulse.fork(pulse.ADD_REM),\n      fmod = _.mod || false,\n      encoders = _.encoders,\n      encode = pulse.encode; // if an array, the encode directive includes additional sets\n  // that must be defined in order for the primary set to be invoked\n  // e.g., only run the update set if the hover set is defined\n\n  if (isArray(encode)) {\n    if (out.changed() || encode.every(function (e) {\n      return encoders[e];\n    })) {\n      encode = encode[0];\n      out.encode = null; // consume targeted encode directive\n    } else {\n      return pulse.StopPropagation;\n    }\n  } // marshall encoder functions\n\n\n  var reenter = encode === 'enter',\n      update = encoders.update || falsy,\n      enter = encoders.enter || falsy,\n      exit = encoders.exit || falsy,\n      set = (encode && !reenter ? encoders[encode] : update) || falsy;\n\n  if (pulse.changed(pulse.ADD)) {\n    pulse.visit(pulse.ADD, function (t) {\n      enter(t, _);\n      update(t, _);\n    });\n    out.modifies(enter.output);\n    out.modifies(update.output);\n\n    if (set !== falsy && set !== update) {\n      pulse.visit(pulse.ADD, function (t) {\n        set(t, _);\n      });\n      out.modifies(set.output);\n    }\n  }\n\n  if (pulse.changed(pulse.REM) && exit !== falsy) {\n    pulse.visit(pulse.REM, function (t) {\n      exit(t, _);\n    });\n    out.modifies(exit.output);\n  }\n\n  if (reenter || set !== falsy) {\n    var flag = pulse.MOD | (_.modified() ? pulse.REFLOW : 0);\n\n    if (reenter) {\n      pulse.visit(flag, function (t) {\n        var mod = enter(t, _) || fmod;\n        if (set(t, _) || mod) out.mod.push(t);\n      });\n      if (out.mod.length) out.modifies(enter.output);\n    } else {\n      pulse.visit(flag, function (t) {\n        if (set(t, _) || fmod) out.mod.push(t);\n      });\n    }\n\n    if (out.mod.length) out.modifies(set.output);\n  }\n\n  return out.changed() ? out : pulse.StopPropagation;\n};","map":{"version":3,"sources":["C:/NewReactResume/resm/node_modules/vega-encode/src/Encode.js"],"names":["Transform","falsy","inherits","isArray","Encode","params","call","prototype","transform","_","pulse","out","fork","ADD_REM","fmod","mod","encoders","encode","changed","every","e","StopPropagation","reenter","update","enter","exit","set","ADD","visit","t","modifies","output","REM","flag","MOD","modified","REFLOW","push","length"],"mappings":"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","sourcesContent":["import {Transform} from 'vega-dataflow';\nimport {falsy, inherits, isArray} from 'vega-util';\n\n/**\n * Invokes encoding functions for visual items.\n * @constructor\n * @param {object} params - The parameters to the encoding functions. This\n *   parameter object will be passed through to all invoked encoding functions.\n * @param {object} [params.mod=false] - Flag indicating if tuples in the input\n *   mod set that are unmodified by encoders should be included in the output.\n * @param {object} param.encoders - The encoding functions\n * @param {function(object, object): boolean} [param.encoders.update] - Update encoding set\n * @param {function(object, object): boolean} [param.encoders.enter] - Enter encoding set\n * @param {function(object, object): boolean} [param.encoders.exit] - Exit encoding set\n */\nexport default function Encode(params) {\n  Transform.call(this, null, params);\n}\n\nvar prototype = inherits(Encode, Transform);\n\nprototype.transform = function(_, pulse) {\n  var out = pulse.fork(pulse.ADD_REM),\n      fmod = _.mod || false,\n      encoders = _.encoders,\n      encode = pulse.encode;\n\n  // if an array, the encode directive includes additional sets\n  // that must be defined in order for the primary set to be invoked\n  // e.g., only run the update set if the hover set is defined\n  if (isArray(encode)) {\n    if (out.changed() || encode.every(function(e) { return encoders[e]; })) {\n      encode = encode[0];\n      out.encode = null; // consume targeted encode directive\n    } else {\n      return pulse.StopPropagation;\n    }\n  }\n\n  // marshall encoder functions\n  var reenter = encode === 'enter',\n      update = encoders.update || falsy,\n      enter = encoders.enter || falsy,\n      exit = encoders.exit || falsy,\n      set = (encode && !reenter ? encoders[encode] : update) || falsy;\n\n  if (pulse.changed(pulse.ADD)) {\n    pulse.visit(pulse.ADD, function(t) { enter(t, _); update(t, _); });\n    out.modifies(enter.output);\n    out.modifies(update.output);\n    if (set !== falsy && set !== update) {\n      pulse.visit(pulse.ADD, function(t) { set(t, _); });\n      out.modifies(set.output);\n    }\n  }\n\n  if (pulse.changed(pulse.REM) && exit !== falsy) {\n    pulse.visit(pulse.REM, function(t) { exit(t, _); });\n    out.modifies(exit.output);\n  }\n\n  if (reenter || set !== falsy) {\n    var flag = pulse.MOD | (_.modified() ? pulse.REFLOW : 0);\n    if (reenter) {\n      pulse.visit(flag, function(t) {\n        var mod = enter(t, _) || fmod;\n        if (set(t, _) || mod) out.mod.push(t);\n      });\n      if (out.mod.length) out.modifies(enter.output);\n    } else {\n      pulse.visit(flag, function(t) {\n        if (set(t, _) || fmod) out.mod.push(t);\n      });\n    }\n    if (out.mod.length) out.modifies(set.output);\n  }\n\n  return out.changed() ? out : pulse.StopPropagation;\n};\n"]},"metadata":{},"sourceType":"module"}